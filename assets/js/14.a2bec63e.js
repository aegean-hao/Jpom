(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{511:function(s,n,a){"use strict";a.r(n);var t=a(31),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"完整的容器构建-dsl-示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#完整的容器构建-dsl-示例"}},[s._v("#")]),s._v(" 完整的容器构建 dsl 示例")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 基础镜像 目前仅支持 ubuntu-latest\nrunsOn: ubuntu-latest\n# 使用哪个 docker 构建,填写 docker 标签 默认查询可用的第一个,如果 tag 查询出多个也选择第一个结果\nfromTag: xxx\nsteps:\n  - uses: java\n    version: 8\n  - uses: maven\n    version: 3.8.5\n  - uses: node\n    version: 16.3.0\n# 将容器中的文件缓存到 docker 卷中\n  - uses: cache\n    path: /root/.m2\n  - run: npm config set registry https://registry.npmmirror.com\n# 内置变量 ${JPOM_WORKING_DIR} ${JPOM_BUILD_ID}\n  - run: cd  ${JPOM_WORKING_DIR}/web-vue && npm i && npm run build\n  - run: cd ${JPOM_WORKING_DIR} && mvn package -s script/settings.xml\n# 宿主机目录和容器目录挂载 /host:/container:ro\n# binds:\n#  - /Users/user/.m2/settings.xml:/root/.m2/\n# 宿主机文件上传到容器 /host:/container:true\n# dirChildrenOnly = true will create /var/data/titi and /var/data/tata dirChildrenOnly = false will create /var/data/root/titi and /var/data/root/tata\n# copy:\n#  - /Users/user/.m2/settings.xml:/root/.m2/:false\n# 给容器添加环境变量\nenv:\n  NODE_OPTIONS: --max-old-space-size=900\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);